---
import BaseLayout from "@/layouts/BaseLayout.astro";
---

<BaseLayout
	description="Get in touch with FusionCore Apps. We'd love to hear from you for support, partnerships, or business inquiries."
	title="Contact Us — FusionCore Apps"
>
	<div class="contact-page mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8">
		<!-- Page Header -->
		<div class="mb-16 text-center">
			<h1 class="mb-6 text-4xl font-bold text-gray-900 sm:text-5xl dark:text-white">
				Get In Touch
			</h1>
			<p class="mx-auto max-w-3xl text-xl leading-relaxed text-gray-600 dark:text-gray-400">
				We'd love to hear from you. Whether you have a question about our apps, need support, or
				want to discuss a potential partnership, our team is ready to help.
			</p>
		</div>

		<div class="grid gap-12 lg:grid-cols-3">
			<!-- Contact Information -->
			<div class="lg:col-span-1">
				<div class="space-y-8">
					<h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">Contact information</h2>

					<!-- Email -->
					<div class="flex items-start gap-4">
						<div
							class="flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-blue-600"
						>
							<svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path
									d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"></path>
							</svg>
						</div>
						<div>
							<h3 class="mb-1 font-semibold text-gray-900 dark:text-white">Email</h3>
							<a
								class="text-brand-600 dark:text-brand-400 hover:text-brand-700 dark:hover:text-brand-300 transition-colors"
								href="mailto:jeanrey.ese@gmail.com"
							>
								jeanrey.ese@gmail.com
							</a>
							<p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
								We'll respond within 24 hours
							</p>
						</div>
					</div>

					<!-- Support -->
					<div class="flex items-start gap-4">
						<div
							class="flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-green-500 to-green-600"
						>
							<svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path
									d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"></path>
							</svg>
						</div>
						<div>
							<h3 class="mb-1 font-semibold text-gray-900 dark:text-white">Support</h3>
							<p class="text-gray-600 dark:text-gray-400">
								For app-related issues and technical support
							</p>
							<a
								class="text-brand-600 dark:text-brand-400 hover:text-brand-700 dark:hover:text-brand-300 text-sm transition-colors"
								href="mailto:jeanrey.ese@gmail.com?subject=App Support Request"
							>
								Get help →
							</a>
						</div>
					</div>

					<!-- Business -->
					<div class="flex items-start gap-4">
						<div
							class="flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-purple-500 to-purple-600"
						>
							<svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path
									d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 002 2h-6a2 2 0 01-2-2V6m6 0H4a2 2 0 00-2 2v10a2 2 0 002 2h16a2 2 0 002-2V8a2 2 0 00-2-2z"
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"></path>
							</svg>
						</div>
						<div>
							<h3 class="mb-1 font-semibold text-gray-900 dark:text-white">Business inquiries</h3>
							<p class="text-gray-600 dark:text-gray-400">
								Partnerships, collaborations, and business opportunities
							</p>
							<a
								class="text-brand-600 dark:text-brand-400 hover:text-brand-700 dark:hover:text-brand-300 text-sm transition-colors"
								href="mailto:jeanrey.ese@gmail.com?subject=Business Inquiry"
							>
								Let's talk →
							</a>
						</div>
					</div>
				</div>
			</div>

			<!-- Contact Form -->
			<div class="lg:col-span-2">
				<div class="card p-8">
					<h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">Send us a message</h2>

					<!-- Success/Error Messages -->
					<div class="mb-6 hidden" id="formMessages"></div>

					<form class="space-y-6" id="contactForm">
						<!-- Name and Email -->
						<div class="grid gap-4 sm:grid-cols-2 sm:gap-6">
							<div>
								<label class="label" for="name">Full name *</label>
								<input
									autocomplete="name"
									class="input"
									id="name"
									name="name"
									placeholder="John Doe"
									required
									type="text"
								/>
							</div>

							<div>
								<label class="label" for="email">Email address *</label>
								<input
									autocomplete="email"
									class="input"
									id="email"
									name="email"
									placeholder="john@example.com"
									required
									type="email"
								/>
							</div>
						</div>

						<!-- Subject -->
						<div>
							<label class="label" for="subject">Subject *</label>
							<select class="input" id="subject" name="subject" required>
								<option value="">Select a subject</option>
								<option value="app-support">📱 App support</option>
								<option value="bug-report">🐛 Bug report</option>
								<option value="feature-request">💡 Feature request</option>
								<option value="business-inquiry">💼 Business inquiry</option>
								<option value="partnership">🤝 Partnership</option>
								<option value="general">💬 General question</option>
								<option value="other">📝 Other</option>
							</select>
						</div>

						<!-- App (if applicable) -->
						<div>
							<label class="label" for="app">Related app (optional)</label>
							<input
								class="input"
								id="app"
								name="app"
								placeholder="e.g., Bible TPT, Biblia TLA"
								type="text"
							/>
							<p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
								If your message is about a specific app, please let us know which one.
							</p>
						</div>

						<!-- Message -->
						<div>
							<label class="label" for="message">Message *</label>
							<textarea
								class="input resize-y"
								id="message"
								name="message"
								placeholder="Tell us how we can help you..."
								required
								rows="6"></textarea>
						</div>

						<!-- Privacy Notice -->
						<div
							class="rounded-xl border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 dark:border-blue-800 dark:from-blue-900/20 dark:to-indigo-900/20"
						>
							<div class="flex items-start gap-3">
								<svg
									class="mt-0.5 h-5 w-5 flex-shrink-0 text-blue-600 dark:text-blue-400"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
								>
									<path
										d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"></path>
								</svg>
								<div class="text-sm text-blue-800 dark:text-blue-200">
									<p class="mb-1 font-medium">Privacy & data protection</p>
									<p>
										By submitting this form, you agree to our
										<a class="font-medium underline hover:no-underline" href="/privacy"
											>Privacy policy</a
										>. We'll only use your information to respond to your inquiry and will never
										share it with third parties.
									</p>
								</div>
							</div>
						</div>

						<!-- Submit Button -->
						<div
							class="flex flex-col-reverse items-stretch justify-end gap-3 pt-4 sm:flex-row sm:items-center sm:gap-4"
						>
							<button class="button button--secondary" type="reset">
								<svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path
										d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"></path>
								</svg>
								Clear form
							</button>
							<button class="button button--primary" id="submitButton" type="submit">
								<svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path
										d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"></path>
								</svg>
								Send message
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!-- FAQ Section -->
		<section class="mt-24 border-t border-gray-200 pt-16 dark:border-gray-800">
			<div class="mb-12 text-center">
				<h2 class="mb-4 text-3xl font-bold text-gray-900 dark:text-white">
					Frequently asked questions
				</h2>
				<p class="text-lg text-gray-600 dark:text-gray-400">
					Find quick answers to common questions about our apps and services.
				</p>
			</div>

			<div class="grid gap-6 md:grid-cols-2">
				<div class="card p-6">
					<h3 class="mb-3 text-lg font-semibold text-gray-900 dark:text-white">
						How do I download your apps?
					</h3>
					<p class="text-gray-600 dark:text-gray-400">
						All our apps are available on the Google Play Store. Simply visit our
						<a class="text-brand-600 dark:text-brand-400 hover:underline" href="/apps">apps page</a>
						and click on any app to be redirected to the Play Store for download.
					</p>
				</div>

				<div class="card p-6">
					<h3 class="mb-3 text-lg font-semibold text-gray-900 dark:text-white">
						Are your apps free?
					</h3>
					<p class="text-gray-600 dark:text-gray-400">
						Most of our apps are free to download and use. Some may offer premium features through
						in-app purchases. Check each app's details page for specific pricing information.
					</p>
				</div>

				<div class="card p-6">
					<h3 class="mb-3 text-lg font-semibold text-gray-900 dark:text-white">
						How do I report a bug or issue?
					</h3>
					<p class="text-gray-600 dark:text-gray-400">
						You can report bugs or issues by using the contact form above with "Bug Report" as the
						subject, or by leaving a review on the Google Play Store. We actively monitor and
						respond to all feedback.
					</p>
				</div>

				<div class="card p-6">
					<h3 class="mb-3 text-lg font-semibold text-gray-900 dark:text-white">
						Do you offer custom app development?
					</h3>
					<p class="text-gray-600 dark:text-gray-400">
						Yes! We offer custom mobile app development services. Please contact us with "Business
						Inquiry" as the subject to discuss your project requirements and get a quote.
					</p>
				</div>
			</div>
		</section>
	</div>
</BaseLayout>

<script>
	// Contact Form Logic
	document.addEventListener("astro:page-load", async () => {
		var form = document.getElementById("contact-form") as HTMLFormElement | null;
		if (!form) return;

		var submitButton = form && form.querySelector('button[type="submit"]');

		interface FormData {
			name: string;
			email: string;
			message: string;
		}
		// Form validation
		function validateForm(formData: FormData) {
			var errors = [];

			if (!formData.name || formData.name.trim().length < 2) {
				errors.push("El nombre debe tener al menos 2 caracteres");
			}

			if (!formData.email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
				errors.push("Por favor, ingresa un email válido");
			}

			if (!formData.message || formData.message.trim().length < 10) {
				errors.push("El mensaje debe tener al menos 10 caracteres");
			}

			return errors;
		}

		// Show notification
		function showNotification(message: string, type: string) {
			if (!type) type = "info";

			var notification = document.createElement("div");

			var className = "fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 max-w-sm ";
			if (type === "error") {
				className += "bg-red-500 text-white";
			} else if (type === "success") {
				className += "bg-green-500 text-white";
			} else {
				className += "bg-blue-500 text-white";
			}

			notification.className = className;
			notification.textContent = message;

			document.body.appendChild(notification);

			setTimeout(function () {
				notification.remove();
			}, 5000);
		}
		// Handle form submission
		form.addEventListener("submit", function (e) {
			e.preventDefault();

			if (submitButton) {
				submitButton.setAttribute("disabled", "true");
				submitButton.textContent = "Enviando...";
			}
			const formData = {
				name: form?.querySelector<HTMLInputElement>('[name="name"]')?.value?.trim() ?? "",
				email: form?.querySelector<HTMLInputElement>('[name="email"]')?.value?.trim() ?? "",
				subject: form?.querySelector<HTMLInputElement>('[name="subject"]')?.value?.trim() ?? "",
				message: form?.querySelector<HTMLTextAreaElement>('[name="message"]')?.value?.trim() ?? "",
			};

			var errors = validateForm(formData);

			if (errors.length > 0) {
				showNotification(errors.join(". "), "error");

				if (submitButton) {
					submitButton.setAttribute("disabled", "false");
					submitButton.textContent = "Enviar mensaje";
				}
				return;
			}

			// Simulate form submission (replace with actual endpoint)
			setTimeout(function () {
				showNotification("¡Mensaje enviado correctamente! Te contactaremos pronto.", "success");
				form?.reset();

				if (submitButton) {
					submitButton.setAttribute("disabled", "false");
					submitButton.textContent = "Enviar mensaje";
				}
			}, 1000);
		});
	});
</script>
